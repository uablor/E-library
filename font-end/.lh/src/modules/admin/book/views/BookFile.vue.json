{
    "sourceFile": "src/modules/admin/book/views/BookFile.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1748021383537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748021446671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,26 +51,33 @@\n       <!-- Table -->\r\n       <div class=\"overflow-x-auto\">\r\n         <table class=\"min-w-full bg-white shadow-md rounded-lg text-sm md:text-base\">\r\n           <thead class=\"bg-gray-100\">\r\n-            <tr>\r\n-              <th class=\"py-3 px-4\">#</th>\r\n-              <th class=\"py-3 px-4\">ຊື່ປະເພດ</th>\r\n-              <th class=\"py-3 px-4\">ລາຍລະອຽດ</th>\r\n-              <th class=\"py-3 px-4\">ໄດ້ສ້າງໃນວັນທີ</th>\r\n-              <th class=\"py-3 px-4\">ໄດ້ອັບເດດວັນທີ</th>\r\n-            </tr>\r\n-          </thead>\r\n-          <tbody>\r\n-            <tr v-for=\"category in currentCategories\" :key=\"category.id\" @click=\"selectCategory(category)\"\r\n-              :class=\"['border-b  cursor-pointer text-center', selectedCategory?.id === category.id ? 'bg-green-600' : '']\">\r\n-              <td class=\"py-2 px-4\">{{ category.id }}</td>\r\n-              <td class=\"py-2 px-4\">{{ category.name }}</td>\r\n-              <td class=\"py-2 px-4\">{{ category.description }}</td>\r\n-              <td class=\"py-2 px-4\">{{ category.created_at }}</td>\r\n-              <td class=\"py-2 px-4\">{{ category.updated_at }}</td>\r\n-            </tr>\r\n-          </tbody>\r\n+  <tr>\r\n+    <th class=\"py-3 px-4\">#</th>\r\n+    <th class=\"py-3 px-4\">File URL</th>\r\n+    <th class=\"py-3 px-4\">Type</th>\r\n+    <th class=\"py-3 px-4\">Upload Time</th>\r\n+    <th class=\"py-3 px-4\">Created At</th>\r\n+    <th class=\"py-3 px-4\">Updated At</th>\r\n+  </tr>\r\n+</thead>\r\n+<tbody>\r\n+  <tr\r\n+    v-for=\"file in currentBookFiles\"\r\n+    :key=\"file.id\"\r\n+    @click=\"selectBookFile(file)\"\r\n+    :class=\"['border-b cursor-pointer text-center', selectedBookFile?.id === file.id ? 'bg-green-600' : '']\"\r\n+  >\r\n+    <td class=\"py-2 px-4\">{{ file.id }}</td>\r\n+    <td class=\"py-2 px-4\">{{ file.file_url }}</td>\r\n+    <td class=\"py-2 px-4\">{{ file.file_type }}</td>\r\n+    <td class=\"py-2 px-4\">{{ file.upload_timestamp }}</td>\r\n+    <td class=\"py-2 px-4\">{{ file.created_at }}</td>\r\n+    <td class=\"py-2 px-4\">{{ file.updated_at }}</td>\r\n+  </tr>\r\n+</tbody>\r\n+\r\n         </table>\r\n       </div>\r\n     </div>\r\n   </div>\r\n"
                },
                {
                    "date": 1748021497781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,87 +86,89 @@\n   <AddCategoryModal :show=\"isModalOpen\" @close=\"isModalOpen = false\" @save=\"saveCategory\" />\r\n   <EditCategoryModal :show=\"isEditModalOpen\" :userData=\"selectedCategory\" @close=\"isEditModalOpen = false\"\r\n     @update=\"handleCategoryUpdate\" />\r\n </template>\r\n-\r\n-<script setup lang=\"ts\">\r\n import { ref, computed } from 'vue'\r\n-import AddCategoryModal from '../components/modal_category/AddCategoryModal.vue'\r\n-import EditCategoryModal from '../components/modal_category/EditCategoryModal.vue'\r\n-import {BookType as Category} from '../entities/bookType.entity'\r\n-import { useI18n } from 'vue-i18n';\r\n+import AddBookFileModal from '../components/modal_book/AddBookFileModal.vue'\r\n+import EditBookFileModal from '../components/modal_book/EditBookFileModal.vue'\r\n+import { BookFile } from '../entities/bookFile.entity'\r\n+import { useI18n } from 'vue-i18n'\r\n \r\n-const { t } = useI18n();\r\n+const { t } = useI18n()\r\n \r\n-const searchQuery = ref('');\r\n+const searchQuery = ref('')\r\n const isModalOpen = ref(false)\r\n const isEditModalOpen = ref(false)\r\n-const selectedCategory = ref<Category | null>(null)\r\n+const selectedBookFile = ref<BookFile | null>(null)\r\n const viewMode = ref<'normal' | 'soft'>('normal')\r\n \r\n-const categories = ref<Category[]>([\r\n-  { id: 1, name: 'ນິທານ', description: 'ໝວກປື້ມກ່ຽວກັບນິທານ', created_at: '2024-01-01', updated_at: '2024-02-01' },\r\n-  { id: 2, name: 'ວິທະຍາສາດ', description: 'ໝວກປື້ມວິທະຍາສາດ', created_at: '2024-01-15', updated_at: '2024-02-05' },\r\n-  { id: 3, name: 'ປະຫວັດສາດ', description: 'ໝວກປື້ມປະຫວັດສາດ', created_at: '2024-01-20', updated_at: '2024-02-10' }\r\n+const bookFiles = ref<BookFile[]>([\r\n+  {\r\n+    id: 1,\r\n+    file_url: 'book1.pdf',\r\n+    file_type: 'PDF',\r\n+    upload_timestamp: '2024-05-01 10:00',\r\n+    created_at: new Date('2024-05-01'),\r\n+    updated_at: new Date('2024-05-01'),\r\n+    deleted_at: null\r\n+  }\r\n ])\r\n \r\n-const softDeletedCategories = ref<Category[]>([\r\n-  { id: 4, name: 'ໂຄງການລຶບ', description: 'ໝວກຖືກລຶບ', created_at: '2023-01-01', updated_at: '2023-06-01' }\r\n-])\r\n+const softDeletedBookFiles = ref<BookFile[]>([])\r\n \r\n-const currentCategories = computed(() => viewMode.value === 'normal' ? filteredCategories.value : filteredCategoriesSoft_delete.value)\r\n+const currentBookFiles = computed(() =>\r\n+  viewMode.value === 'normal' ? filteredBookFiles.value : filteredBookFilesSoftDeleted.value\r\n+)\r\n \r\n-function toggleSoftDelete() {\r\n-  // Just for view\r\n-}\r\n+function toggleSoftDelete() {}\r\n \r\n function openAddModal() {\r\n   isModalOpen.value = true\r\n }\r\n \r\n-function openEditModal(category: Category | null) {\r\n-  if (category) {\r\n-    selectedCategory.value = category\r\n+function openEditModal(bookFile: BookFile | null) {\r\n+  if (bookFile) {\r\n+    selectedBookFile.value = bookFile\r\n     isEditModalOpen.value = true\r\n   }\r\n }\r\n \r\n-function saveCategory(newCategory: Category) {\r\n-  categories.value.push({ ...newCategory, id: Date.now(), created_at: new Date().toISOString(), updated_at: new Date().toISOString() })\r\n+function saveBookFile(newBookFile: BookFile) {\r\n+  bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n   isModalOpen.value = false\r\n }\r\n \r\n-function handleCategoryUpdate(updated: Category) {\r\n-  const index = categories.value.findIndex(c => c.id === updated.id)\r\n+function handleBookFileUpdate(updated: BookFile) {\r\n+  const index = bookFiles.value.findIndex(f => f.id === updated.id)\r\n   if (index !== -1) {\r\n-    categories.value[index] = { ...updated, updated_at: new Date().toISOString() }\r\n+    bookFiles.value[index] = { ...updated, updated_at: new Date() }\r\n   }\r\n   isEditModalOpen.value = false\r\n }\r\n \r\n-function deleteCategory() {\r\n-  if (selectedCategory.value) {\r\n-    const index = categories.value.findIndex(c => c.id === selectedCategory.value!.id)\r\n+function deleteBookFile() {\r\n+  if (selectedBookFile.value) {\r\n+    const index = bookFiles.value.findIndex(f => f.id === selectedBookFile.value!.id)\r\n     if (index !== -1) {\r\n-      const deleted = categories.value.splice(index, 1)[0]\r\n-      softDeletedCategories.value.push(deleted)\r\n+      const deleted = bookFiles.value.splice(index, 1)[0]\r\n+      deleted.deleted_at = new Date()\r\n+      softDeletedBookFiles.value.push(deleted)\r\n     }\r\n-    selectedCategory.value = null\r\n+    selectedBookFile.value = null\r\n   }\r\n }\r\n \r\n-function selectCategory(category: Category) {\r\n-  selectedCategory.value = category\r\n+function selectBookFile(file: BookFile) {\r\n+  selectedBookFile.value = file\r\n }\r\n \r\n+const filteredBookFiles = computed(() =>\r\n+  bookFiles.value.filter(file =>\r\n+    file.file_url?.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n+  )\r\n+)\r\n \r\n-const filteredCategories = computed(() =>\r\n-  categories.value.filter(category =>\r\n-    category?.name?.toLowerCase().includes(searchQuery.value.toLowerCase()) \r\n+const filteredBookFilesSoftDeleted = computed(() =>\r\n+  softDeletedBookFiles.value.filter(file =>\r\n+    file.file_url?.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n   )\r\n-);\r\n-const filteredCategoriesSoft_delete = computed(() =>\r\n-  softDeletedCategories.value.filter(softDeletedCategories =>\r\n-    softDeletedCategories?.name?.toLowerCase().includes(searchQuery.value.toLowerCase()) \r\n-  )\r\n-);\r\n-</script>\r\n+)\r\n"
                },
                {
                    "date": 1748021504827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,10 @@\n   <AddCategoryModal :show=\"isModalOpen\" @close=\"isModalOpen = false\" @save=\"saveCategory\" />\r\n   <EditCategoryModal :show=\"isEditModalOpen\" :userData=\"selectedCategory\" @close=\"isEditModalOpen = false\"\r\n     @update=\"handleCategoryUpdate\" />\r\n </template>\r\n+\r\n+<script setup lang=\"ts\">\r\n import { ref, computed } from 'vue'\r\n import AddBookFileModal from '../components/modal_book/AddBookFileModal.vue'\r\n import EditBookFileModal from '../components/modal_book/EditBookFileModal.vue'\r\n import { BookFile } from '../entities/bookFile.entity'\r\n@@ -171,4 +173,6 @@\n   softDeletedBookFiles.value.filter(file =>\r\n     file.file_url?.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n   )\r\n )\r\n+\r\n+</script>\r\n"
                },
                {
                    "date": 1748021520530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,10 +89,10 @@\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n import { ref, computed } from 'vue'\r\n-import AddBookFileModal from '../components/modal_book/AddBookFileModal.vue'\r\n-import EditBookFileModal from '../components/modal_book/EditBookFileModal.vue'\r\n+// import AddBookFileModal from '../components/modal_book/AddBookFileModal.vue'\r\n+// import EditBookFileModal from '../components/modal_book/EditBookFileModal.vue'\r\n import { BookFile } from '../entities/bookFile.entity'\r\n import { useI18n } from 'vue-i18n'\r\n \r\n const { t } = useI18n()\r\n"
                },
                {
                    "date": 1748021596412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,15 +22,15 @@\n                ກູ້ຄືນ\r\n              </button>\r\n \r\n              <button v-if=\"viewMode === 'normal'\"  class=\"bg-yellow-500 text-white px-4 py-1 w-20 rounded hover:bg-yellow-700\"\r\n-               @click=\"openEditModal(selectedCategory)\" :disabled=\"!selectedCategory\"\r\n-               :class=\"{ 'opacity-50 cursor-not-allowed': !selectedCategory }\">\r\n+               @click=\"openEditModal(selectedBookFile)\" :disabled=\"!selectedBookFile\"\r\n+               :class=\"{ 'opacity-50 cursor-not-allowed': !selectedBookFile }\">\r\n                ແກ້ໄຂ\r\n              </button>\r\n              <button  v-if=\"viewMode === 'normal'\" class=\"bg-red-500 text-white px-4 py-1 w-20 rounded hover:bg-red-700\"\r\n-               @click=\"deleteCategory\" :disabled=\"!selectedCategory\"\r\n-               :class=\"{ 'opacity-50 cursor-not-allowed': !selectedCategory }\">\r\n+               @click=\"deleteBookFile\" :disabled=\"!selectedBookFile\"\r\n+               :class=\"{ 'opacity-50 cursor-not-allowed': !selectedBookFile }\">\r\n                ລຶບ\r\n              </button>\r\n              <button  v-if=\"viewMode === 'normal'\" class=\"bg-green-600 text-white px-4 py-1 rounded w-30 hover:bg-green-700\" @click=\"openAddModal\">\r\n                ເພີ່ມໝວກໝູ່\r\n@@ -82,11 +82,11 @@\n     </div>\r\n   </div>\r\n \r\n   <!-- Modals -->\r\n-  <AddCategoryModal :show=\"isModalOpen\" @close=\"isModalOpen = false\" @save=\"saveCategory\" />\r\n-  <EditCategoryModal :show=\"isEditModalOpen\" :userData=\"selectedCategory\" @close=\"isEditModalOpen = false\"\r\n-    @update=\"handleCategoryUpdate\" />\r\n+  <AddBookFileModal :show=\"isModalOpen\" @close=\"isModalOpen = false\" @save=\"saveBookFile\" />\r\n+  <EditBookFileModal :show=\"isEditModalOpen\" :userData=\"selectedBookFile\" @close=\"isEditModalOpen = false\"\r\n+    @update=\"handleBookFileUpdate\" />\r\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n import { ref, computed } from 'vue'\r\n"
                },
                {
                    "date": 1748021610821,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n          <div class=\"flex sm:flex-row gap-2 sm:gap-4\">\r\n               \r\n    <select v-model=\"viewMode\" @change=\"toggleSoftDelete\" class=\"block w-full rounded border border-gray-300 px-3 py-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\">\r\n              <option value=\"\" disabled>-- ເລືອກ --</option>\r\n-             <option value=\"normal\">ໝວກໝູ່ປື້ມເອກະສານ</option>\r\n+             <option value=\"normal\">ປື້ມເອກະສານ</option>\r\n              <option value=\"soft\">ລາຍການທີ່ຖືກລຶບ</option>\r\n            </select>\r\n            <div class=\"py-2 px-4 whitespace-nowrap flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2\">\r\n             <button v-if=\"viewMode === 'soft'\"  class=\"bg-green-600 text-white px-4 py-1 rounded w-20 hover:bg-green-700\"     >\r\n"
                },
                {
                    "date": 1748021616667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n          <div class=\"flex sm:flex-row gap-2 sm:gap-4\">\r\n               \r\n    <select v-model=\"viewMode\" @change=\"toggleSoftDelete\" class=\"block w-full rounded border border-gray-300 px-3 py-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\">\r\n              <option value=\"\" disabled>-- ເລືອກ --</option>\r\n-             <option value=\"normal\">ປື້ມເອກະສານ</option>\r\n+             <option value=\"normal\">ໄຟປື້ມເອກະສານ</option>\r\n              <option value=\"soft\">ລາຍການທີ່ຖືກລຶບ</option>\r\n            </select>\r\n            <div class=\"py-2 px-4 whitespace-nowrap flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2\">\r\n             <button v-if=\"viewMode === 'soft'\"  class=\"bg-green-600 text-white px-4 py-1 rounded w-20 hover:bg-green-700\"     >\r\n"
                },
                {
                    "date": 1748022210497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n          <div class=\"flex sm:flex-row gap-2 sm:gap-4\">\r\n               \r\n    <select v-model=\"viewMode\" @change=\"toggleSoftDelete\" class=\"block w-full rounded border border-gray-300 px-3 py-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\">\r\n              <option value=\"\" disabled>-- ເລືອກ --</option>\r\n-             <option value=\"normal\">ໄຟປື້ມເອກະສານ</option>\r\n+             <option value=\"normal\">ໄຟ໌ປື້ມເອກະສານ</option>\r\n              <option value=\"soft\">ລາຍການທີ່ຖືກລຶບ</option>\r\n            </select>\r\n            <div class=\"py-2 px-4 whitespace-nowrap flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2\">\r\n             <button v-if=\"viewMode === 'soft'\"  class=\"bg-green-600 text-white px-4 py-1 rounded w-20 hover:bg-green-700\"     >\r\n@@ -108,9 +108,9 @@\n     id: 1,\r\n     file_url: 'book1.pdf',\r\n     file_type: 'PDF',\r\n     upload_timestamp: '2024-05-01 10:00',\r\n-    created_at: new Date('2024-05-01'),\r\n+    created_at: '2024-05-01 10:00',\r\n     updated_at: new Date('2024-05-01'),\r\n     deleted_at: null\r\n   }\r\n ])\r\n"
                },
                {
                    "date": 1748022407647,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n     file_url: 'book1.pdf',\r\n     file_type: 'PDF',\r\n     upload_timestamp: '2024-05-01 10:00',\r\n     created_at: '2024-05-01 10:00',\r\n-    updated_at: new Date('2024-05-01'),\r\n+    updated_at: '2024-05-01 10:00',\r\n     deleted_at: null\r\n   }\r\n ])\r\n \r\n@@ -135,8 +135,9 @@\n }\r\n \r\n function saveBookFile(newBookFile: BookFile) {\r\n   bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n+  bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n   isModalOpen.value = false\r\n }\r\n \r\n function handleBookFileUpdate(updated: BookFile) {\r\n"
                },
                {
                    "date": 1748022416688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,10 +134,10 @@\n   }\r\n }\r\n \r\n function saveBookFile(newBookFile: BookFile) {\r\n-  bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n-  bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n+  bookFiles.value.push({ ...newBookFile deleted_at: null })\r\n+//   bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n   isModalOpen.value = false\r\n }\r\n \r\n function handleBookFileUpdate(updated: BookFile) {\r\n"
                },
                {
                    "date": 1748022432394,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,17 +134,18 @@\n   }\r\n }\r\n \r\n function saveBookFile(newBookFile: BookFile) {\r\n-  bookFiles.value.push({ ...newBookFile deleted_at: null })\r\n+  bookFiles.value.push({ ...newBookFile, deleted_at: null })\r\n //   bookFiles.value.push({ ...newBookFile, id: Date.now(), created_at: new Date(), updated_at: new Date(), deleted_at: null })\r\n   isModalOpen.value = false\r\n }\r\n \r\n function handleBookFileUpdate(updated: BookFile) {\r\n   const index = bookFiles.value.findIndex(f => f.id === updated.id)\r\n   if (index !== -1) {\r\n     bookFiles.value[index] = { ...updated, updated_at: new Date() }\r\n+    bookFiles.value[index] = { ...updated, updated_at: new Date() }\r\n   }\r\n   isEditModalOpen.value = false\r\n }\r\n \r\n"
                },
                {
                    "date": 1748022438242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,10 +142,10 @@\n \r\n function handleBookFileUpdate(updated: BookFile) {\r\n   const index = bookFiles.value.findIndex(f => f.id === updated.id)\r\n   if (index !== -1) {\r\n-    bookFiles.value[index] = { ...updated, updated_at: new Date() }\r\n-    bookFiles.value[index] = { ...updated, updated_at: new Date() }\r\n+    bookFiles.value[index] = { ...updated,  }\r\n+    // bookFiles.value[index] = { ...updated, updated_at: new Date() }\r\n   }\r\n   isEditModalOpen.value = false\r\n }\r\n \r\n"
                },
                {
                    "date": 1748022514958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n                :class=\"{ 'opacity-50 cursor-not-allowed': !selectedBookFile }\">\r\n                ລຶບ\r\n              </button>\r\n              <button  v-if=\"viewMode === 'normal'\" class=\"bg-green-600 text-white px-4 py-1 rounded w-30 hover:bg-green-700\" @click=\"openAddModal\">\r\n-               ເພີ່ມໝວກໝູ່\r\n+               ເພີ່\r\n              </button>\r\n               <div class=\"flex flex-col sm:flex-row items-stretch sm:items-center \">\r\n                         <select\r\n                             class=\"bg-green-600 shadow-md text-white px-2 py-1 h-9 focus:outline-none cursor-pointer rounded-l sm:rounded-l\">\r\n"
                },
                {
                    "date": 1748022521479,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n                :class=\"{ 'opacity-50 cursor-not-allowed': !selectedBookFile }\">\r\n                ລຶບ\r\n              </button>\r\n              <button  v-if=\"viewMode === 'normal'\" class=\"bg-green-600 text-white px-4 py-1 rounded w-30 hover:bg-green-700\" @click=\"openAddModal\">\r\n-               ເພີ່ມ\r\n+               ເພີ່ມໄ\r\n              </button>\r\n               <div class=\"flex flex-col sm:flex-row items-stretch sm:items-center \">\r\n                         <select\r\n                             class=\"bg-green-600 shadow-md text-white px-2 py-1 h-9 focus:outline-none cursor-pointer rounded-l sm:rounded-l\">\r\n"
                },
                {
                    "date": 1748023161119,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n     :class=\"['border-b cursor-pointer text-center', selectedBookFile?.id === file.id ? 'bg-green-600' : '']\"\r\n   >\r\n     <td class=\"py-2 px-4\">{{ file.id }}</td>\r\n     <td class=\"py-2 px-4\">{{ file.file_url }}</td>\r\n-    <td class=\"py-2 px-4\">{{ file.b }}</td>\r\n+    <td class=\"py-2 px-4\">{{ file.book }}</td>\r\n     <td class=\"py-2 px-4\">{{ file.file_type }}</td>\r\n     <td class=\"py-2 px-4\">{{ file.upload_timestamp }}</td>\r\n     <td class=\"py-2 px-4\">{{ file.created_at }}</td>\r\n     <td class=\"py-2 px-4\">{{ file.updated_at }}</td>\r\n"
                }
            ],
            "date": 1748021383537,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"p-5 bg-pink-50 mb-5\">\r\n    <div class=\"p-6 bg-white shadow-md rounded-lg\">\r\n      <!-- Title and controls -->\r\n      <div class=\"flex  sm:flex-row sm:justify-between sm:items-center gap-4 mb-4\">\r\n        <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-500\">\r\n          <i class=\"fa-solid fa-book\"></i> ຈັດການໝວກໝູ່ປື້ມ\r\n        </h1>\r\n\r\n        <div >\r\n\r\n          \r\n         <div class=\"flex sm:flex-row gap-2 sm:gap-4\">\r\n              \r\n   <select v-model=\"viewMode\" @change=\"toggleSoftDelete\" class=\"block w-full rounded border border-gray-300 px-3 py-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\">\r\n             <option value=\"\" disabled>-- ເລືອກ --</option>\r\n             <option value=\"normal\">ໝວກໝູ່ປື້ມເອກະສານ</option>\r\n             <option value=\"soft\">ລາຍການທີ່ຖືກລຶບ</option>\r\n           </select>\r\n           <div class=\"py-2 px-4 whitespace-nowrap flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2\">\r\n            <button v-if=\"viewMode === 'soft'\"  class=\"bg-green-600 text-white px-4 py-1 rounded w-20 hover:bg-green-700\"     >\r\n               ກູ້ຄືນ\r\n             </button>\r\n\r\n             <button v-if=\"viewMode === 'normal'\"  class=\"bg-yellow-500 text-white px-4 py-1 w-20 rounded hover:bg-yellow-700\"\r\n               @click=\"openEditModal(selectedCategory)\" :disabled=\"!selectedCategory\"\r\n               :class=\"{ 'opacity-50 cursor-not-allowed': !selectedCategory }\">\r\n               ແກ້ໄຂ\r\n             </button>\r\n             <button  v-if=\"viewMode === 'normal'\" class=\"bg-red-500 text-white px-4 py-1 w-20 rounded hover:bg-red-700\"\r\n               @click=\"deleteCategory\" :disabled=\"!selectedCategory\"\r\n               :class=\"{ 'opacity-50 cursor-not-allowed': !selectedCategory }\">\r\n               ລຶບ\r\n             </button>\r\n             <button  v-if=\"viewMode === 'normal'\" class=\"bg-green-600 text-white px-4 py-1 rounded w-30 hover:bg-green-700\" @click=\"openAddModal\">\r\n               ເພີ່ມໝວກໝູ່\r\n             </button>\r\n              <div class=\"flex flex-col sm:flex-row items-stretch sm:items-center \">\r\n                        <select\r\n                            class=\"bg-green-600 shadow-md text-white px-2 py-1 h-9 focus:outline-none cursor-pointer rounded-l sm:rounded-l\">\r\n                            <option value=\"all\">{{ t('navbar.all') }}</option>\r\n                        </select>\r\n                        <input type=\"text\" :placeholder=\"t('navbar.search') + '..........'\"  v-model=\"searchQuery\"\r\n                            class=\"focus:outline-none text-black shadow-md h-9 py-1 pl-3 rounded-r sm:rounded-r\" />\r\n                    </div>\r\n           </div>\r\n         </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Table -->\r\n      <div class=\"overflow-x-auto\">\r\n        <table class=\"min-w-full bg-white shadow-md rounded-lg text-sm md:text-base\">\r\n          <thead class=\"bg-gray-100\">\r\n            <tr>\r\n              <th class=\"py-3 px-4\">#</th>\r\n              <th class=\"py-3 px-4\">ຊື່ປະເພດ</th>\r\n              <th class=\"py-3 px-4\">ລາຍລະອຽດ</th>\r\n              <th class=\"py-3 px-4\">ໄດ້ສ້າງໃນວັນທີ</th>\r\n              <th class=\"py-3 px-4\">ໄດ້ອັບເດດວັນທີ</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"category in currentCategories\" :key=\"category.id\" @click=\"selectCategory(category)\"\r\n              :class=\"['border-b  cursor-pointer text-center', selectedCategory?.id === category.id ? 'bg-green-600' : '']\">\r\n              <td class=\"py-2 px-4\">{{ category.id }}</td>\r\n              <td class=\"py-2 px-4\">{{ category.name }}</td>\r\n              <td class=\"py-2 px-4\">{{ category.description }}</td>\r\n              <td class=\"py-2 px-4\">{{ category.created_at }}</td>\r\n              <td class=\"py-2 px-4\">{{ category.updated_at }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Modals -->\r\n  <AddCategoryModal :show=\"isModalOpen\" @close=\"isModalOpen = false\" @save=\"saveCategory\" />\r\n  <EditCategoryModal :show=\"isEditModalOpen\" :userData=\"selectedCategory\" @close=\"isEditModalOpen = false\"\r\n    @update=\"handleCategoryUpdate\" />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\nimport AddCategoryModal from '../components/modal_category/AddCategoryModal.vue'\r\nimport EditCategoryModal from '../components/modal_category/EditCategoryModal.vue'\r\nimport {BookType as Category} from '../entities/bookType.entity'\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nconst { t } = useI18n();\r\n\r\nconst searchQuery = ref('');\r\nconst isModalOpen = ref(false)\r\nconst isEditModalOpen = ref(false)\r\nconst selectedCategory = ref<Category | null>(null)\r\nconst viewMode = ref<'normal' | 'soft'>('normal')\r\n\r\nconst categories = ref<Category[]>([\r\n  { id: 1, name: 'ນິທານ', description: 'ໝວກປື້ມກ່ຽວກັບນິທານ', created_at: '2024-01-01', updated_at: '2024-02-01' },\r\n  { id: 2, name: 'ວິທະຍາສາດ', description: 'ໝວກປື້ມວິທະຍາສາດ', created_at: '2024-01-15', updated_at: '2024-02-05' },\r\n  { id: 3, name: 'ປະຫວັດສາດ', description: 'ໝວກປື້ມປະຫວັດສາດ', created_at: '2024-01-20', updated_at: '2024-02-10' }\r\n])\r\n\r\nconst softDeletedCategories = ref<Category[]>([\r\n  { id: 4, name: 'ໂຄງການລຶບ', description: 'ໝວກຖືກລຶບ', created_at: '2023-01-01', updated_at: '2023-06-01' }\r\n])\r\n\r\nconst currentCategories = computed(() => viewMode.value === 'normal' ? filteredCategories.value : filteredCategoriesSoft_delete.value)\r\n\r\nfunction toggleSoftDelete() {\r\n  // Just for view\r\n}\r\n\r\nfunction openAddModal() {\r\n  isModalOpen.value = true\r\n}\r\n\r\nfunction openEditModal(category: Category | null) {\r\n  if (category) {\r\n    selectedCategory.value = category\r\n    isEditModalOpen.value = true\r\n  }\r\n}\r\n\r\nfunction saveCategory(newCategory: Category) {\r\n  categories.value.push({ ...newCategory, id: Date.now(), created_at: new Date().toISOString(), updated_at: new Date().toISOString() })\r\n  isModalOpen.value = false\r\n}\r\n\r\nfunction handleCategoryUpdate(updated: Category) {\r\n  const index = categories.value.findIndex(c => c.id === updated.id)\r\n  if (index !== -1) {\r\n    categories.value[index] = { ...updated, updated_at: new Date().toISOString() }\r\n  }\r\n  isEditModalOpen.value = false\r\n}\r\n\r\nfunction deleteCategory() {\r\n  if (selectedCategory.value) {\r\n    const index = categories.value.findIndex(c => c.id === selectedCategory.value!.id)\r\n    if (index !== -1) {\r\n      const deleted = categories.value.splice(index, 1)[0]\r\n      softDeletedCategories.value.push(deleted)\r\n    }\r\n    selectedCategory.value = null\r\n  }\r\n}\r\n\r\nfunction selectCategory(category: Category) {\r\n  selectedCategory.value = category\r\n}\r\n\r\n\r\nconst filteredCategories = computed(() =>\r\n  categories.value.filter(category =>\r\n    category?.name?.toLowerCase().includes(searchQuery.value.toLowerCase()) \r\n  )\r\n);\r\nconst filteredCategoriesSoft_delete = computed(() =>\r\n  softDeletedCategories.value.filter(softDeletedCategories =>\r\n    softDeletedCategories?.name?.toLowerCase().includes(searchQuery.value.toLowerCase()) \r\n  )\r\n);\r\n</script>\r\n"
        }
    ]
}